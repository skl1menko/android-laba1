# Android Room Database Lab

## –û–ø–∏—Å –ø—Ä–æ—î–∫—Ç—É

–¶–µ–π Android-–¥–æ–¥–∞—Ç–æ–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Room ORM –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –ª–æ–∫–∞–ª—å–Ω–æ—é SQLite –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.

## –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### 1. –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö Room
- **–î–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ (entities)**:
  - `CategoryEntity` - –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–æ–≤–∞—Ä—ñ–≤
  - `ProductEntity` - –ø—Ä–æ–¥—É–∫—Ç–∏

### 2. –ó–≤'—è–∑–æ–∫ –º—ñ–∂ —Ç–∞–±–ª–∏—Ü—è–º–∏
- –ü—Ä–æ–¥—É–∫—Ç–∏ –ø–æ–≤'—è–∑–∞–Ω—ñ –∑ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏ —á–µ—Ä–µ–∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π –∫–ª—é—á `categoryId`
- –ü—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è –≤—Å—ñ –ø–æ–≤'—è–∑–∞–Ω—ñ –ø—Ä–æ–¥—É–∫—Ç–∏ (CASCADE)

### 3. CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó

#### –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó:
- **–î–æ–¥–∞–≤–∞–Ω–Ω—è**: –ï–∫—Ä–∞–Ω "–î–µ—Ç–∞–ª—ñ" ‚Üí –≤–∫–ª–∞–¥–∫–∞ "–î–æ–¥–∞—Ç–∏ –ö–∞—Ç–µ–≥–æ—Ä—ñ—é"
- **–ü–µ—Ä–µ–≥–ª—è–¥**: –ì–æ–ª–æ–≤–Ω–∏–π –µ–∫—Ä–∞–Ω –ø–æ–∫–∞–∑—É—î –≤—Å—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–∏
- **–í–∏–¥–∞–ª–µ–Ω–Ω—è**: –ö–Ω–æ–ø–∫–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è (üóëÔ∏è) –Ω–∞ –∫–∞—Ä—Ç—Ü—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
- **–û–Ω–æ–≤–ª–µ–Ω–Ω—è**: –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –≤ ViewModel (`updateCategory()`)

#### –ü—Ä–æ–¥—É–∫—Ç–∏:
- **–î–æ–¥–∞–≤–∞–Ω–Ω—è**: –ï–∫—Ä–∞–Ω "–î–µ—Ç–∞–ª—ñ" ‚Üí –≤–∫–ª–∞–¥–∫–∞ "–î–æ–¥–∞—Ç–∏ –ü—Ä–æ–¥—É–∫—Ç"
- **–ü–µ—Ä–µ–≥–ª—è–¥**: –ì–æ–ª–æ–≤–Ω–∏–π –µ–∫—Ä–∞–Ω –ø–æ–∫–∞–∑—É—î –≤—Å—ñ –ø—Ä–æ–¥—É–∫—Ç–∏ –ø—ñ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏
- **–í–∏–¥–∞–ª–µ–Ω–Ω—è**: –ö–Ω–æ–ø–∫–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è (üóëÔ∏è) –Ω–∞ –∫–∞—Ä—Ç—Ü—ñ –ø—Ä–æ–¥—É–∫—Ç—É
- **–û–Ω–æ–≤–ª–µ–Ω–Ω—è**: –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –≤ ViewModel (`updateProduct()`)

### 4. –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
- –°–ø—ñ–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫ –Ω–∞ –≥–æ–ª–æ–≤–Ω–æ–º—É –µ–∫—Ä–∞–Ω—ñ
- –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–∞ –ø—Ä–æ–¥—É–∫—Ç–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è —Ä–∞–∑–æ–º
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `StateFlow` –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è UI
- `LazyColumn` –¥–ª—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤–µ–ª–∏–∫–∏—Ö —Å–ø–∏—Å–∫—ñ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

### CategoryEntity
```kotlin
@Entity(tableName = "categories")
data class CategoryEntity(
    @PrimaryKey(autoGenerate = true)
    val id: Int = 0,
    val name: String,
    val icon: String
)
```

### ProductEntity
```kotlin
@Entity(
    tableName = "products",
    foreignKeys = [ForeignKey(
        entity = CategoryEntity::class,
        parentColumns = ["id"],
        childColumns = ["categoryId"],
        onDelete = ForeignKey.CASCADE,
        onUpdate = ForeignKey.CASCADE
    )],
    indices = [Index(value = ["categoryId"])]
)
data class ProductEntity(
    @PrimaryKey(autoGenerate = true)
    val id: Int = 0,
    val categoryId: Int,
    val name: String,
    val price: Double,
    val description: String
)
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Kotlin** - –º–æ–≤–∞ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è
- **Jetpack Compose** - UI framework
- **Room** - ORM –¥–ª—è SQLite
- **Coroutines & Flow** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è
- **ViewModel** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å—Ç–∞–Ω–æ–º
- **Navigation Compose** - –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è

## –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –ø—Ä–æ—î–∫—Ç –≤ Android Studio
2. –î–æ—á–µ–∫–∞–π—Ç–µ—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó Gradle
3. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –¥–æ–¥–∞—Ç–æ–∫ –Ω–∞ –µ–º—É–ª—è—Ç–æ—Ä—ñ –∞–±–æ –ø—Ä–∏—Å—Ç—Ä–æ—ó
4. –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑ –ø–æ—á–∞—Ç–∫–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó:
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –µ–∫—Ä–∞–Ω "–î–µ—Ç–∞–ª—ñ" (–∫–Ω–æ–ø–∫–∞ –≤–Ω–∏–∑—É –≥–æ–ª–æ–≤–Ω–æ–≥–æ –µ–∫—Ä–∞–Ω—É)
2. –û–±–µ—Ä—ñ—Ç—å –≤–∫–ª–∞–¥–∫—É "–î–æ–¥–∞—Ç–∏ –ö–∞—Ç–µ–≥–æ—Ä—ñ—é"
3. –í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É —Ç–∞ —ñ–∫–æ–Ω–∫—É (emoji)
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–î–æ–¥–∞—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—é"

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç—É:
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –µ–∫—Ä–∞–Ω "–î–µ—Ç–∞–ª—ñ"
2. –û–±–µ—Ä—ñ—Ç—å –≤–∫–ª–∞–¥–∫—É "–î–æ–¥–∞—Ç–∏ –ü—Ä–æ–¥—É–∫—Ç"
3. –û–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é –∑—ñ —Å–ø–∏—Å–∫—É
4. –í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É, —Ü—ñ–Ω—É —Ç–∞ –æ–ø–∏—Å
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–î–æ–¥–∞—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç"

### –í–∏–¥–∞–ª–µ–Ω–Ω—è:
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ —ñ–∫–æ–Ω–∫—É –∫–æ—à–∏–∫–∞ (üóëÔ∏è) –Ω–∞ –±—É–¥—å-—è–∫—ñ–π –∫–∞—Ä—Ç—Ü—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –∞–±–æ –ø—Ä–æ–¥—É–∫—Ç—É

## –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ Room

```kotlin
// Room
implementation("androidx.room:room-runtime:2.6.1")
implementation("androidx.room:room-ktx:2.6.1")
ksp("androidx.room:room-compiler:2.6.1")
```

## –ê–≤—Ç–æ—Ä

Android Lab Project - Room Database Implementation

